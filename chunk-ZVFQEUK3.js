import{B as se,C as ae,D as me,E as b,F as ue,G as pe,I as de,J as le,K as ce,L as fe,M as P,a as re,l as oe,n as g,o as F,y as ne,z as ie}from"./chunk-7MU4XPSV.js";import{C as K,Ca as S,Ja as s,Rb as W,Sb as Z,Tb as ee,Ua as N,Ub as te,Va as a,Vb as M,X as Y,Xa as i,Ya as n,Za as J,a as c,ab as X,ac as f,b as U,ba as h,bb as d,ca as C,cb as V,cc as he,dc as ge,ec as x,fb as m,fc as _e,gb as Q,ha as l,hc as Ue,ic as Fe,kc as be,lc as xe,mb as E,na as y,nb as A,oa as v,p as q,u as G,va as L,wa as z,xa as R}from"./chunk-MBW5URTO.js";var O=g("[Users Page] Update User Info ",F()),D=g("[Users/API] Updated User Success",F()),I=g("[Users/API] Updated User  Failure",F()),w=g("[Users/Form] Update Users Form Info",F()),B=g("[Users/Form] Undo User Form Update");var T="userDetail",Ae={user:null,history:[],loaded:!1,error:null},Me=ue(Ae,b(w,(e,{user:u})=>U(c({},e),{history:e.user?[...e.history,e.user]:e.history,user:u})),b(B,e=>{let u=e.history[e.history.length-1]||null,t=e.history.slice(0,-1);return U(c({},e),{user:u,history:t})}),b(D,(e,{user:u})=>U(c({},e),{user:c(c({},e.user),u)})),b(I,(e,{error:u})=>U(c({},e),{error:u})));function Ce(e,u){return Me(e,u)}var ye=(()=>{class e{constructor(){this.apiUrl="https://dummyjson.com/users/add",this._http=l(re)}updateUser(t){return this._http.post(this.apiUrl,t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ve=(()=>{class e{constructor(){this.actions$=l(le),this._userService=l(ye),this.updateUser$=de(()=>this.actions$.pipe(ce(O),Y(({userData:t})=>this._userService.updateUser(t).pipe(G(r=>D({user:r})),K(r=>q(I({error:r})))))))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=h({token:e,factory:e.\u0275fac})}}return e})();var Oe=ae(T),Se=se(Oe,e=>e?.user);var j=(()=>{class e{constructor(){this.store=l(ne),this.loaded$=this.store.pipe(ie(Se))}updateUserInfoToStore(t){this.store.dispatch(w({user:t}))}saveUserOnServe(t){this.store.dispatch(O({userData:t}))}undoChanges(){this.store.dispatch(B())}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=h({token:e,factory:e.\u0275fac})}}return e})();var Ne=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=C({providers:[j],imports:[M,me.forFeature(T,Ce),fe.forFeature([ve])]})}}return e})();function we(e,u){e&1&&(i(0,"p",13),m(1,"This field is required."),n())}function Be(e,u){e&1&&(i(0,"p",13),m(1,"Please enter a valid email address."),n())}function Te(e,u){if(e&1){let t=X();i(0,"div",14)(1,"bud-ui-input",4),d("blurEvent",function(){let o=z(t).index,p=V();return R(p.onBlur("phoneNumbers",o))}),n(),i(2,"bud-ui-button",15),d("click",function(){let o=z(t).index,p=V();return R(p.removePhoneNumber(o))}),n()()}if(e&2){let t=u.$implicit;s(),a("inputControl",t)("placeholder","Enter phone number"),s(),a("buttonSize","small")}}var H=(()=>{class e{constructor(){this.updateUserFormData=new S,this.saveUserFormData=new S,this.undoUserForm=new S,this.userForm=this.createUserForm()}get nameControl(){return this.getControl("name")}get emailControl(){return this.getControl("email")}get phoneNumbers(){return this.getControl("phoneNumbers")}ngOnChanges(t){this.hasUserDetailsChanged(t)&&this.userDetails&&this.populateForm(this.userDetails)}onBlur(t,r){let o=this.getControlByNameOrIndex(t,r);o?.touched&&o.valid&&this.updateUserFormData.emit(this.userForm.value)}addPhoneNumber(){this.phoneNumbers.push(new x("",[f.required,f.minLength(8)]))}removePhoneNumber(t){this.phoneNumbers.removeAt(t),this.updateUserFormData.emit(this.userForm.value)}undoInput(){this.undoUserForm.emit(),this.userForm.reset()}onSubmit(){this.userForm.valid&&this.saveUserFormData.emit(this.userForm.value)}createUserForm(){return new ge({name:new x("",f.required),email:new x("",[f.required,f.email]),phoneNumbers:new be([])})}populateForm(t){this.userForm.patchValue({name:t.name||"",email:t.email||""}),this.phoneNumbers.clear(),t.phoneNumbers?.forEach(r=>this.phoneNumbers.push(new x(r,f.required)))}getControl(t){return this.userForm.get(t)}getControlByNameOrIndex(t,r){return t==="phoneNumbers"&&r!==void 0?this.phoneNumbers.at(r):this.getControl(t)}hasUserDetailsChanged(t){return!!(t.userDetails&&t.userDetails.currentValue)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=y({type:e,selectors:[["bud-admin-users-ngrx-form"]],inputs:{userDetails:"userDetails"},outputs:{updateUserFormData:"updateUserFormData",saveUserFormData:"saveUserFormData",undoUserForm:"undoUserForm"},features:[L],decls:19,vars:13,consts:[[1,"dynamic-form",3,"ngSubmit","formGroup"],["type","primary","label","Undo",1,"undo",3,"click","buttonSize"],[1,"form-group"],["for","name"],[3,"blurEvent","inputControl","placeholder"],["class","error-message",4,"ngIf"],["for","email"],[3,"blurEvent","inputControl","type","placeholder"],["formArrayName","phoneNumbers",1,"form-group"],[1,"info-container"],["type","secondary","label","Add Number",3,"click","buttonSize"],["style","display: flex; align-items: center; gap: 1rem",4,"ngFor","ngForOf"],["type","secondary","label","Submit",3,"buttonSize","disabled"],[1,"error-message"],[2,"display","flex","align-items","center","gap","1rem"],["type","primary","label","X",3,"click","buttonSize"]],template:function(r,o){r&1&&(i(0,"form",0),d("ngSubmit",function(){return o.onSubmit()}),i(1,"bud-ui-button",1),d("click",function(){return o.undoInput()}),n(),i(2,"div",2)(3,"label",3),m(4,"Name:"),n(),i(5,"bud-ui-input",4),d("blurEvent",function(){return o.onBlur("name")}),n(),N(6,we,2,0,"p",5),n(),i(7,"div",2)(8,"label",6),m(9,"Email:"),n(),i(10,"bud-ui-input",7),d("blurEvent",function(){return o.onBlur("email")}),n(),N(11,Be,2,0,"p",5),n(),i(12,"div",8)(13,"div",9)(14,"label"),m(15,"Phone Numbers:"),n(),i(16,"bud-ui-button",10),d("click",function(){return o.addPhoneNumber()}),n()(),N(17,Te,3,3,"div",11),n(),J(18,"bud-ui-button",12),n()),r&2&&(a("formGroup",o.userForm),s(),a("buttonSize","small"),s(4),a("inputControl",o.nameControl)("placeholder","Enter your name"),s(),a("ngIf",o.nameControl.invalid&&o.nameControl.touched),s(4),a("inputControl",o.emailControl)("type","email")("placeholder","Enter your email"),s(),a("ngIf",o.emailControl.invalid&&o.emailControl.touched),s(5),a("buttonSize","small"),s(),a("ngForOf",o.phoneNumbers.controls),s(),a("buttonSize","large")("disabled",o.userForm.invalid))},dependencies:[W,Z,_e,he,Ue,Fe,pe,P],styles:[".dynamic-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%;max-width:500px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.dynamic-form[_ngcontent-%COMP%]   .undo[_ngcontent-%COMP%]{align-self:end}.dynamic-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.dynamic-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#333;display:flex;align-items:center;justify-content:space-between}.dynamic-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.dynamic-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.875rem;color:#e74c3c;margin-top:5px}"],changeDetection:0})}}return e})();var Ee=(()=>{class e{constructor(){this._usersFacade=l(j)}ngOnInit(){this.userDataInfo$=this._usersFacade.loaded$}captureFormData(t){this._usersFacade.updateUserInfoToStore(t)}saveData(t){this._usersFacade.saveUserOnServe(t)}undoUpdate(){this._usersFacade.undoChanges()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=y({type:e,selectors:[["bud-admin-users-ngrx-home"]],decls:19,vars:8,consts:[[1,"form-container"],[1,"form-title"],[1,"form-description"],[3,"updateUserFormData","saveUserFormData","undoUserForm","userDetails"],[1,"results"],[1,"results-title"],[1,"results-description"],[1,"results-code"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h3",1),m(2,"User Registration Form"),n(),i(3,"p",2),m(4,"Please fill out the details below. Ensure all fields are valid before submission."),n(),i(5,"bud-admin-users-ngrx-form",3),E(6,"async"),d("updateUserFormData",function(k){return o.captureFormData(k)})("saveUserFormData",function(k){return o.saveData(k)})("undoUserForm",function(){return o.undoUpdate()}),n()(),i(7,"div",4)(8,"h4",5),m(9,"Live Store Data"),n(),i(10,"p",6),m(11," This is a live update of the user details from the store. On form submission, the data will be sent to a "),i(12,"strong"),m(13,"fake dummy API"),n(),m(14,", which will fetch additional details. "),n(),i(15,"code",7),m(16),E(17,"async"),E(18,"json"),n()()),r&2&&(s(5),a("userDetails",A(6,2,o.userDataInfo$)),s(11),Q(A(18,6,A(17,4,o.userDataInfo$))))},dependencies:[H,ee,te],styles:[".text-center[_ngcontent-%COMP%], .form-description[_ngcontent-%COMP%], .form-title[_ngcontent-%COMP%]{text-align:center}.text-primary[_ngcontent-%COMP%], .results-title[_ngcontent-%COMP%], .form-title[_ngcontent-%COMP%]{color:#036}.text-secondary[_ngcontent-%COMP%], .results-description[_ngcontent-%COMP%], .form-description[_ngcontent-%COMP%]{color:#555}.container[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;background-color:#eaf4ff;border-radius:8px;box-shadow:0 4px 6px #0000001a;overflow-x:auto}.form-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px}.form-description[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:20px}.results-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:10px}.results-description[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:15px}.results-code[_ngcontent-%COMP%]{display:block;font-family:Courier New,Courier,monospace;background-color:#f4f4f4;padding:10px;border-radius:4px;color:#333;font-size:.875rem;line-height:1.5}"]})}}return e})();var ke=[{path:"",component:Ee}],Tt=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=C({imports:[M,oe.forChild(ke),xe,P,Ne]})}}return e})();export{Tt as BudAdminFeaturesUsersNgrxModule,ke as routes};
